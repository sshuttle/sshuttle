language: python
python:
- 2.7
- 3.4
- 3.5
- 3.6
- pypy

install:
    - travis_retry pip install -q -r requirements-tests.txt

before_script:
    # stop the build if there are any pep8 violations
    - flake8 sshuttle sshuttle tests
    # exit-zero treats all errors as warnings
    - flake8 sshuttle --exit-zero --max-complexity=10

script:
  - PYTHONPATH=. py.test
